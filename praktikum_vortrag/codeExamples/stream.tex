\begin{verbatim}
	public void computeAndRepaintSpectrogram() {
	
	    BufferedAudioSourceReader basr = bas.getReader(viewFromSample,viewNSamples);	
	    window = Window.create(basr, windowType+","+windowLength+","+windowShift);
	    FrameSource spec = new FFT(window);
	    
	    samplesPerShift = ((basr.getSampleRate() * windowShift) / 1000);		
	    int size = (viewNSamples / samplesPerShift);
	    spectrogramBuffer = new double[size][spec.getFrameSize()];
	     
	    for(int i = 0; i < size && spec.read(spectrogramBuffer[i]); i++) { }
	    repaintAndUpdateImage();
	}
\end{verbatim}
